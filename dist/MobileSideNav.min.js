+function(n){"use strict";function e(n){return"translate3d("+n+"px, 0px, 0)"}var t=!1,i="nav-openned",o="nav-dragged",a=90,s=[0-a/2,0+a/2,180-a/2,-180+a/2];n.MobileSideNav=function(n,e){this.$context=n,this.options=e,this._isDrawed=!1;var i=this,a=new Hammer(n[0],{});a.get("pan").set({direction:Hammer.DIRECTION_HORIZONTAL,threshold:10}),a.on("panstart",function(n){t&&console.log(n.center.x),(i.CanDrag||n.center.x<50)&&(i.CanDrag=!0,i._isDrawed||i.Draw(),i.MenuWidth=i.$menuDOM.outerWidth(),i.PanStart=i.Position,$("body").addClass(o),window.cancelAnimationFrame(i.Inertia))}),a.on("pan",function(n){var e=n.angle>s[0]&&n.angle<s[1]||n.angle>s[3]&&n.angle>s[2];i.CanDrag&&e&&(i.Move(i.PanStart+n.deltaX),window.cancelAnimationFrame(i.Inertia))}),a.on("panend",function(n){i.CanDrag&&(i.CanDrag=!1,n.velocityX>.5||n.velocityX<-.5?i.Inertia=window.requestAnimationFrame(function(){i.Increment(n.velocityX)}):($("body").removeClass(o),i.PanStart+n.deltaX>i.MenuWidth/2?i.Open():i.Close()))}),document.addEventListener("backbutton",function(n){i.IsOpenned&&(n.preventDefault(),i.Close())})},n.MobileSideNav.prototype.Increment=function(n){var e=this.Position-10*n,t=this;this.Move(e),e<=this.MenuWidth&&e>=0?t.Inertia=window.requestAnimationFrame(function(){t.Increment(n)}):(e>=t.MenuWidth?t.Open():t.Close(),$("body").removeClass(o))},n.MobileSideNav.prototype.Draw=function(){var n,e=$(document.createElement("DIV"));for(var i in this.options.menus)n=this.options.menus[i].clone(),n[0]&&n[0].id&&(n[0].id+="_mobile"),e.append(n);e[0].id="mobile-nav",this.$context.append(e),this.options.afterDraw(e),this._isDrawed=!0,this.MenuWidth=e.outerWidth(),this.$menuDOM=e,this.Position=0,t&&console.log(this)},n.MobileSideNav.prototype.Open=function(){n.cancelAnimationFrame(this.Inertia),this._isDrawed||this.Draw(),this.MenuWidth=this.$menuDOM.outerWidth(),this.$menuDOM[0].style[Modernizr.prefixed("transform")]=e(this.MenuWidth),this.Position=this.MenuWidth,setTimeout(function(){this.IsOpenned=!0}.bind(this)),this.CanDrag=!0,$("body").addClass(i)},n.MobileSideNav.prototype.Close=function(){n.cancelAnimationFrame(this.Inertia),this.$menuDOM[0].style[Modernizr.prefixed("transform")]=e(0),this.IsOpenned=!1,this.Position=0,this.CanDrag=!1,$("body").removeClass(i)},n.MobileSideNav.prototype.Move=function(n){n<=this.MenuWidth&&n>=0&&(this.$menuDOM[0].style[Modernizr.prefixed("transform")]=e(n),this.Position=n)}}(window);