+function(){"use strict";function n(n){return"translate3d("+n+"px, 0px, 0)"}var t=!1,e="nav-openned",i="nav-dragged",o=90,a=[0-o/2,0+o/2,180-o/2,-180+o/2];window.MobileNav=function(n,t){this.$context=n,this.options=t,this._isDrawed=!1;var e=this,o=new Hammer(n[0],{});o.get("pan").set({direction:Hammer.DIRECTION_HORIZONTAL,threshold:10}),o.on("panstart",function(n){console.log(n.center.x),(e.CanDrag||n.center.x<50)&&(e.CanDrag=!0,e._isDrawed||e.Draw(),e.MenuWidth=e.$menuDOM.outerWidth(),e.PanStart=e.Position,$("body").addClass(i),window.cancelAnimationFrame(e.Inertia))}),o.on("pan",function(n){var t=n.angle>a[0]&&n.angle<a[1]||n.angle>a[3]&&n.angle>a[2];e.CanDrag&&t&&(e.Move(e.PanStart+n.deltaX),window.cancelAnimationFrame(e.Inertia))}),o.on("panend",function(n){e.CanDrag&&(e.CanDrag=!1,n.velocityX>.5||n.velocityX<-.5?e.Inertia=window.requestAnimationFrame(function(){e.Increment(n.velocityX)}):($("body").removeClass(i),e.PanStart+n.deltaX>e.MenuWidth/2?e.Open():e.Close()))}),document.addEventListener("backbutton",function(n){e.IsOpenned&&(n.preventDefault(),e.Close())})},MobileNav.prototype.Increment=function(n){var t=this.Position-10*n,e=this;this.Move(t),t<=this.MenuWidth&&t>=0?e.Inertia=window.requestAnimationFrame(function(){e.Increment(n)}):(t>=e.MenuWidth?e.Open():e.Close(),$("body").removeClass(i))},MobileNav.prototype.Draw=function(){var n,e=$(document.createElement("DIV"));for(var i in this.options.menus)n=this.options.menus[i].clone(),n[0]&&n[0].id&&(n[0].id+="_mobile"),e.append(n);e[0].id="mobile-nav",this.$context.append(e),this.options.afterDraw(e),this._isDrawed=!0,this.MenuWidth=e.outerWidth(),this.$menuDOM=e,this.Position=0,t&&console.log(this)},MobileNav.prototype.Open=function(){window.cancelAnimationFrame(this.Inertia),this._isDrawed||this.Draw(),this.MenuWidth=this.$menuDOM.outerWidth(),this.$menuDOM[0].style[Modernizr.prefixed("transform")]=n(this.MenuWidth),this.Position=this.MenuWidth,setTimeout(function(){this.IsOpenned=!0}.bind(this)),this.CanDrag=!0,$("body").addClass(e)},MobileNav.prototype.Close=function(){window.cancelAnimationFrame(this.Inertia),this.$menuDOM[0].style[Modernizr.prefixed("transform")]=n(0),this.IsOpenned=!1,this.Position=0,this.CanDrag=!1,$("body").removeClass(e)},MobileNav.prototype.Move=function(t){t<=this.MenuWidth&&t>=0&&(this.$menuDOM[0].style[Modernizr.prefixed("transform")]=n(t),this.Position=t)}}();